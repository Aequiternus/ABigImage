/*! abigimage v2.0.0 (2016-02-14) */
!function(a){function b(a,b,c){a.addEventListener(b,c)}function c(b,c){a.extend(this,a.fn.abigimage.defaults,c),this.elements=b,this.overlay=t,this.layout=u,this.prevBtnBox=w,this.prevBtn=y,this.closeBtnBox=x,this.closeBtn=z,this.box=v,this.bottom=A,this.index=-1,this.distance=0}function d(b,c){return a("<img>").addClass(b).attr("src",c).appendTo(v)}function e(a){s&&(f(a),s.key(a.which))}function f(a){a.preventDefault(),a.stopPropagation()}function g(a){s&&(a.touches.length>1?(I=k(a),s.box.addClass("abigimage-box-zoom")):(S=null,N=O,O=(new Date).getTime(),P=.34*v.width(),Q=v.height(),R=s.slideWidth*P,L=s.img.width(),M=s.img.height()),C=F,D=G,E=H,J=0,K=0,T=a.touches,f(a))}function h(a){if(s){if(J=j(a.touches,"X")-j(T,"X"),K=j(a.touches,"Y")-j(T,"Y"),F=C+J/H,G=D+K/H,a.touches.length>1&&(H=Math.max(1,E*(k(a)/I))),H>s.zoomMin){var b=.5*(L-L/H),c=.5*(M-M/H);F=Math.max(-b,Math.min(b,F)),G=Math.max(-c,Math.min(c,G))}else{if(null===S){var d=Math.abs(K)-Math.abs(J);Math.abs(d)>2&&(S=d>0)}S?F=0:G=0}p(F,G,H),f(a)}}function i(a){if(s){var b=(new Date).getTime(),c=b-O;if(!a.touches.length)if(H<=s.zoomMin)if(1>=c||J>=-1&&1>=J&&K>=-1&&1>=K)O-N<=s.doubleTapInterval?(s.box.addClass("abigimage-box-zoom"),p(F,G,s.zoomMax,!0)):p(0,0,1,!0);else if(S){var d=Math.abs(K);d>R?o():d/c>s.slideVelocity?o():n()}else-R>J?l():J>R?m():Math.abs(J)/c>s.slideVelocity?0>J?l():m():n();else H>s.zoomMax?p(F,G,s.zoomMax,!0):H>s.zoomMin&&b-N<=s.doubleTapInterval&&n();T=a.touches,f(a)}}function j(a,b){for(var c=0,d=0,e=a.length;e>d;d++)c+=a[d]["page"+b];return c/e}function k(a){return Math.sqrt(Math.pow(a.touches[0].pageX-a.touches[1].pageX,2)+Math.pow(a.touches[0].pageY-a.touches[1].pageY,2))}function l(){p(-P,0,1,!0,function(){s.next()})}function m(){p(P,0,1,!0,function(){s.prev()})}function n(){s.box.removeClass("abigimage-box-zoom"),p(0,0,1,!0)}function o(){n(),s.close()}function p(a,b,c,d,e){F=a,G=b,H=c,U=d,V=e;var f="scale("+H+") translate3d("+F+"px, "+G+"px, 0)";W.transition=d?"all .2s ease-out":"",W.webkitTransform=f,W.mozTransform=f,W.msTransform=f,W.oTransform=f,W.transform=f}function q(){if(U=!1,V){var a=V;V=null,a()}}var r,s,t=a("<div>").addClass("abigimage-overlay").appendTo("body").hide(),u=a("<div>").addClass("abigimage-layout").appendTo("body").hide(),v=a("<div>").addClass("abigimage-box").appendTo(u),w=a("<div>").addClass("abigimage-prevBtnBox").appendTo(v),x=a("<div>").addClass("abigimage-closeBtnBox").appendTo(v),y=a("<div>").addClass("abigimage-prevBtn").appendTo(u),z=a("<div>").addClass("abigimage-closeBtn").appendTo(u),A=a("<div>").addClass("abigimage-bottom").appendTo(u),B=v[0];a.fn.abigimage=function(b){var d=new c(this,b);return this._abigimage=d,r=d,this.each(function(b){a(this).unbind("click.abigimage").bind("click.abigimage",function(a){f(a),d.open(b)})})},a.fn.abigimage.defaults={fadeIn:"fast",fadeOut:"fast",slideWidth:.4,slideVelocity:.4,zoomMin:1.5,zoomMax:5,doubleTapInterval:400,prevBtnHtml:"&larr;",closeBtnHtml:"x",keyNext:[13,32,39,40],keyPrev:[8,37,38],keyClose:[27,35,36],onopen:null,onclose:null},a.abigimage={overlay:t,layout:u,prevBtnBox:w,prevBtn:y,closeBtnBox:x,closeBtn:z,box:v,bottom:A,open:function(a,b,c){(c&&c._abigimage||s||r).open(a,b)},close:function(a){(a&&a._abigimage||s||r).close()},next:function(a){(a&&a._abigimage||s||r).next()},prev:function(a){(a&&a._abigimage||s||r).prev()},unbind:function(a){(a&&a._abigimage||s||r).unbind()}},w.click(function(a){f(a),s&&s.prev()}).hover(function(){y.addClass("abigimage-prevBtn-hover")},function(){y.removeClass("abigimage-prevBtn-hover")}),x.click(function(a){f(a),s&&s.close()}).hover(function(){z.addClass("abigimage-closeBtn-hover")},function(){z.removeClass("abigimage-closeBtn-hover")}),y.click(function(a){f(a),s&&s.prev()}),z.click(function(a){f(a),s&&s.close()}),u.on("touchmove",f).on("wheel",f),B.addEventListener&&(b(B,"touchstart",g),b(B,"touchmove",h),b(B,"touchend",i),b(B,"touchcancel",i),b(B,"webkitTransitionEnd",q),b(B,"mozTransitionEnd",q),b(B,"msTransitionEnd",q),b(B,"oTransitionEnd",q),b(B,"transitionend",q)),c.prototype.open=function(b,c){s=this;var g;if("number"==typeof b){if(c=b,c==this.index||0>c||c>this.elements.length-1)return;g=a(this.elements[c]),b=g.data("href")||g.attr("href")}else if("number"!=typeof c)c=this.index;else if(c==this.index)return;this.index=c,this.prevBtn.html(this.prevBtnHtml),this.closeBtn.html(this.closeBtnHtml),this.bottom.html(""),a("img",this.box).remove(),this.box.removeClass("abigimage-box-zoom"),p(0,0,1),this.img=d("abigimage-img",b).click(function(a){f(a),s&&s.next()});var h=a(this.elements[this.nextIndex()]);this.imgNext=d("abigimage-imgNext",h.data("href")||h.attr("href"));var i=a(this.elements[this.prevIndex()]);this.imgPrev=d("abigimage-imgPrev",i.data("href")||i.attr("href")),t.fadeIn(),u.fadeIn(),a(document).unbind("keydown",e).bind("keydown",e),this.onopen&&this.onopen.call(this,g)},c.prototype.next=function(){this.distance==this.elements.length-1?this.close():(++this.distance,this.elements[this.nextIndex()].click())},c.prototype.prev=function(){this.distance==1-this.elements.length?this.close():(--this.distance,this.elements[this.prevIndex()].click())},c.prototype.close=function(){s&&(a(document).unbind("keydown",e),t.fadeOut(this.fadeOut),u.fadeOut(this.fadeOut,q),this.onclose&&this.onclose.call(this),this.index=-1,this.distance=0,s=null)},c.prototype.unbind=function(){this.close(),this.elements.each(function(){a(this).unbind("click.abigimage")})},c.prototype.key=function(a){-1!=this.keyNext.indexOf(a)?this.next():-1!=this.keyPrev.indexOf(a)?this.prev():-1!=this.keyClose.indexOf(a)&&this.close()},c.prototype.nextIndex=function(){var a=this.index+1;return a>=this.elements.length&&(a=0),a},c.prototype.prevIndex=function(){var a=this.index-1;return 0>a&&(a=this.elements.length-1),a};var C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W=B.style}(jQuery);